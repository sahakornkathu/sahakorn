<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap');
*{ box-sizing:border-box; }

body {
  font-family:"Prompt",sans-serif;
  background:#f0f4f8;
  margin:20px;
  color:#333;
  line-height:1.5;
}

h2 { text-align:center; color:#1e40af; margin-bottom:15px; }

form { max-width:950px; margin:auto; }

.form-step {
  display:none;
  background:#fff;
  padding:20px 25px;
  border-radius:12px;
  box-shadow:0 5px 20px rgba(0,0,0,0.08);
  margin-bottom:20px;
}
.form-step.active { display:block; }

input, select {
  display:block;
  width:48%;
  margin:5px 1% 10px 1%;
  padding:8px 10px;
  border:1px solid #ccc;
  border-radius:6px;
  font-size:14px;
  background:#f9fafb;
  transition:0.2s;
}
input:focus, select:focus {
  outline:none;
  border-color:#4a90e2;
  box-shadow:0 0 5px rgba(74,144,226,0.3);
  background:#fff;
}

label{ font-size:13px; margin-right:8px; display:inline-block; }
small{ font-size:12px; color:#555; }

.form-navigation {
  text-align:center;
  margin-top:15px;
}
.form-navigation button {
  padding:8px 14px;
  margin:3px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#4a90e2;
  color:#fff;
  transition:0.2s;
}
.form-navigation button:hover { background:#357abd; }

table {
  border-collapse: collapse;
  width:100%;
  max-width:1000px;
  margin:auto;
  font-size:13px;
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
th, td { border:1px solid #e2e8f0; padding:6px 8px; text-align:center; white-space:nowrap; }
th { background:#4a90e2; color:#fff; cursor:pointer; position:relative; font-weight:500; }
th span.sort-icon { position:absolute; right:6px; font-size:12px; }
tr:nth-child(even){ background:#f9fafb; }
tr:hover{ background:#edf2f7; }

button.edit, button.delete {
  padding:4px 8px;
  border-radius:4px;
  font-size:12px;
  color:#fff;
  border:none;
  cursor:pointer;
}
button.edit{ background:#4a90e2; }
button.edit:hover{ background:#357abd; }
button.delete{ background:#f56565; }
button.delete:hover{ background:#c53030; }

.pagination {
  text-align:center;
  margin:15px auto;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:6px;
}
.pagination button {
  padding:6px 12px;
  border:none;
  border-radius:5px;
  background:#4a90e2;
  color:#fff;
  cursor:pointer;
  font-size:13px;
}
.pagination button:hover{ background:#357abd; }

.progress-container {
  display:flex;
  justify-content:space-between;
  align-items:center;
  max-width:950px;
  margin:0 auto 20px auto;
  position:relative;
  counter-reset: step;
}
.progress-container::before {
  content:"";
  position:absolute;
  top:50%;
  left:0;
  width:100%;
  height:3px;
  background-color:#e2e8f0;
  transform:translateY(-50%);
  z-index:0;
}
.progress-step {
  position:relative;
  z-index:1;
  background:#f9fafb;
  color:#4a5568;
  border:2px solid #cbd5e0;
  border-radius:50px;
  padding:8px 15px;
  font-size:13px;
  font-weight:500;
  flex:1;
  text-align:center;
  margin:0 4px;
  transition:all 0.3s;
  white-space:nowrap;
}
.progress-step.active {
  background:#4a90e2;
  color:#fff;
  border-color:#4a90e2;
  box-shadow:0 0 8px rgba(74,144,226,0.5);
}

/* ‚úÖ Dashboard Summary */
.summary-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  max-width: 950px;
  margin: 20px auto;
}
.summary-card {
  background: #ffffff;
  flex: 1 1 160px;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  text-align: center;
  transition: 0.2s;
}
.summary-card:hover { transform: translateY(-3px); }
.summary-card h3 { margin: 0; font-size: 16px; color: #334155; }
.summary-card p { margin: 5px 0 0 0; font-size: 22px; font-weight: 600; color: #1e3a8a; }
.summary-card.total { border-top: 4px solid #2563eb; }
.summary-card.male { border-top: 4px solid #0ea5e9; }
.summary-card.female { border-top: 4px solid #f472b6; }
.summary-card.exit { border-top: 4px solid #f59e0b; }
.summary-card.death { border-top: 4px solid #ef4444; }

/* ‚úÖ ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏£‡∏≠‡∏á */
#filterDiv {
  background: #ffffff;
  border-radius: 12px;
  padding: 20px 25px;
  max-width: 950px;
  margin: 25px auto;
  box-shadow: 0 6px 16px rgba(0,0,0,0.07);
  display: flex;
  flex-direction: column;
  gap: 18px;
}

#filterDiv .filters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px 20px;
}
#filterDiv label {
  font-size: 14px;
  font-weight: 500;
  color: #1e3a8a;
  margin-bottom: 4px;
  display: block;
}
#filterDiv input,
#filterDiv select {
  width: 100%;
  padding: 9px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 15px;
  background: #f9fafb;
  transition: all 0.2s ease-in-out;
}
#filterDiv input:focus,
#filterDiv select:focus {
  outline: none;
  border-color: #4a90e2;
  box-shadow: 0 0 0 3px rgba(74,144,226,0.2);
  background: #ffffff;
}

.date-filter {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  background: #f8fafc;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 10px 12px;
}
.date-filter label { font-size: 13px; color: #334155; }

.bottom-filters {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 15px;
  border-top: 1px dashed #cbd5e1;
  padding-top: 15px;
}
#filterDiv button {
  border: none;
  border-radius: 8px;
  padding: 10px 18px;
  cursor: pointer;
  font-size: 15px;
  font-weight: 500;
  transition: all 0.25s ease-in-out;
}
#filterDiv button#printReport { background: #2563eb; color: white; }
#filterDiv button#printReport:hover { background: #1e40af; transform: translateY(-1px); }
#filterDiv button#clearFilter {
  background: #f1f5f9;
  color: #1e3a8a;
  border: 1px solid #d1d5db;
}
#filterDiv button#clearFilter:hover { background: #e2e8f0; }

#resultCount {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: #475569;
  margin-top: 8px;
  text-align: right;
}

/* ‚úÖ ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
@media (max-width: 768px) {
  .summary-container { flex-direction: column; align-items: stretch; gap: 10px; }
}
</style>
</head>
<body>

<h2>‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
<div class="progress-container">
  <div class="progress-step active" data-step="1">‚ë† ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</div>
  <div class="progress-step" data-step="2">‚ë° ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà / ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</div>
  <div class="progress-step" data-step="3">‚ë¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</div>
</div>

<form id="memberForm">
  <div class="form-step active">
    <h3>Step 1: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
    <input placeholder="‡πÄ‡∏•‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å" name="member_id" required>
    <small>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</small>
    <input type="date" name="join_date" required>
    <input placeholder="‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤" name="title" required>
    <input placeholder="‡∏ä‡∏∑‡πà‡∏≠" name="first_name" required>
    <input placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" name="last_name" required>
    <input placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (x-xxxx-xxxxx-xx-x)" name="id_card" required maxlength="17">
    <small>üìÖ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</small>
    <input type="date" name="birthday" id="birthday" required>
    <input placeholder="‡∏≠‡∏≤‡∏¢‡∏∏" name="age" id="age" readonly>
    <select name="gender" required>
      <option value="">--‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®--</option>
      <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
      <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
      <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
    </select>
    <select name="group" required>
      <option value="">--‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°--</option>
      <option value="1">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 1</option>
      <option value="2">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 2</option>
      <option value="3">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 3</option>
      <option value="4">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 4</option>
      <option value="5">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 5</option>
      <option value="6">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 6</option>
      <option value="7">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 7</option>
      <option value="8">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 8</option>
      <option value="9">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 9</option>
    </select>
  </div>

  <div class="form-step">
    <h3>Step 2: ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà / ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</h3>
    <input placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" name="house_no" required>
    <input placeholder="‡∏´‡∏°‡∏π‡πà" name="moo">
    <input placeholder="‡∏ñ‡∏ô‡∏ô" name="street" required>
    <input placeholder="‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô" name="village">
    <input placeholder="‡∏ï‡∏≥‡∏ö‡∏•" name="subdistrict" required>
    <input placeholder="‡∏≠‡∏≥‡πÄ‡∏†‡∏≠" name="district" required>
    <input placeholder="‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î" name="province" required>
    <input placeholder="‡πÄ‡∏•‡∏Ç‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå" name="postal_code" required>
    <input placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" name="phone">
    <input placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á" name="phone_alt">
  </div>

  <div class="form-step">
    <h3>Step 3: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° / ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h3>
    <select name="member_status" required>
      <option value="">--‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å--</option>
      <option value="‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</option>
      <option value="‡∏•‡∏≤‡∏≠‡∏≠‡∏Å">‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</option>
      <option value="‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</option>
    </select>
    <select name="marital_status" required>
      <option value="">--‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏£‡∏™--</option>
      <option value="‡πÇ‡∏™‡∏î">‡πÇ‡∏™‡∏î</option>
      <option value="‡∏™‡∏°‡∏£‡∏™">‡∏™‡∏°‡∏£‡∏™</option>
      <option value="‡∏´‡∏°‡πâ‡∏≤‡∏¢">‡∏´‡∏°‡πâ‡∏≤‡∏¢</option>
      <option value="‡∏´‡∏¢‡πà‡∏≤">‡∏´‡∏¢‡πà‡∏≤</option>
    </select>
    <input placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™" name="spouse_name">
    <label style="display:block;margin:8px 0;"><input type="checkbox" name="kyot_member"> ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡∏Å‡∏¢‡∏ó</label>
    <input placeholder="‡πÄ‡∏•‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡∏Å‡∏¢‡∏ó" name="kyot_member_id">
    <input placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏¥‡∏î‡∏≤" name="father_name">
    <input placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≤‡∏£‡∏î‡∏≤" name="mother_name">
  </div>

  <div class="form-navigation">
    <button type="button" id="prevBtn" style="display: none;">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
    <button type="button" id="nextBtn" style="display: inline-block;">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    <button type="submit" id="submitBtn" style="display:none;">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
  </div>
</form>

<!-- ‚úÖ Dashboard Summary -->
<div class="summary-container">
  <div class="summary-card total"><h3>‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3><p id="sumTotal">0</p></div>
  <div class="summary-card male"><h3>‡∏ä‡∏≤‡∏¢</h3><p id="sumMale">0</p></div>
  <div class="summary-card female"><h3>‡∏´‡∏ç‡∏¥‡∏á</h3><p id="sumFemale">0</p></div>
  <div class="summary-card exit"><h3>‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</h3><p id="sumExit">0</p></div>
  <div class="summary-card death"><h3>‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</h3><p id="sumDeath">0</p></div>
</div>

<!-- ‚úÖ ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏£‡∏≠‡∏á -->
<h2>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
<div id="filterDiv">
  <div class="filters-grid">
    <div><label>‡πÄ‡∏•‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</label><input id="searchMemberId" placeholder="‡πÄ‡∏•‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"></div>
    <div><label>‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label><input id="searchName" placeholder="‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></div>
    <div><label>‡∏Å‡∏•‡∏∏‡πà‡∏°</label><input id="searchGroup" placeholder="‡∏Å‡∏•‡∏∏‡πà‡∏°"></div>
    <div><label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label><input id="searchProvince" placeholder="‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"></div>
  </div>
  <div class="date-filter">
    <label>üìÖ ‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
    <input type="date" id="searchJoinDateStart">
    <label>‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
    <input type="date" id="searchJoinDateEnd">
  </div>
  <div class="bottom-filters">
    <div style="display:flex; flex-wrap:wrap; gap:12px; flex:1;">
      <div style="flex:1;">
        <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</label>
        <select id="searchStatus">
          <option value="">--‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å--</option>
          <option value="‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</option>
          <option value="‡∏•‡∏≤‡∏≠‡∏≠‡∏Å">‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</option>
          <option value="‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</option>
        </select>
      </div>
      <div style="flex:1;">
        <label>‡πÄ‡∏û‡∏®</label>
        <select id="searchGender">
          <option value="">--‡πÄ‡∏û‡∏®--</option>
          <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
          <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
          <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
        </select>
      </div>
    </div>
    <div class="buttons-group">
      <button id="printReport">üñ®Ô∏è ‡∏õ‡∏£‡∏¥‡πâ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
      <button id="clearFilter">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</button>
    </div>
  </div>
  <span id="resultCount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
</div>

<!-- ‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
<h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
<table id="memberTable">
  <thead>
    <tr>
      <th data-column="member_id">‡πÄ‡∏•‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</th>
      <th data-column="first_name">‡∏ä‡∏∑‡πà‡∏≠</th>
      <th data-column="last_name">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
      <th data-column="group">‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
      <th data-column="province">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
      <th data-column="member_status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      <th>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
      <th>‡∏•‡∏ö</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="pagination">
  <button id="prevPage">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
  <span id="pageInfo">‡∏´‡∏ô‡πâ‡∏≤ 1</span>
  <button id="nextPage">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
</div>

<script>
const API_URL='https://ttottijljxoinptmhgtu.supabase.co/functions/v1/members';
const form=document.getElementById('memberForm');
const tableBody=document.querySelector('#memberTable tbody');
let allMembers=[];
let currentPage=1, rowsPerPage=10;

/* ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Dashboard */
function updateSummary() {
  const total = allMembers.length;
  const male = allMembers.filter(m => m.gender === "‡∏ä‡∏≤‡∏¢").length;
  const female = allMembers.filter(m => m.gender === "‡∏´‡∏ç‡∏¥‡∏á").length;
  const exit = allMembers.filter(m => m.member_status === "‡∏•‡∏≤‡∏≠‡∏≠‡∏Å").length;
  const death = allMembers.filter(m => m.member_status === "‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï").length;
  document.getElementById('sumTotal').textContent = total;
  document.getElementById('sumMale').textContent = male;
  document.getElementById('sumFemale').textContent = female;
  document.getElementById('sumExit').textContent = exit;
  document.getElementById('sumDeath').textContent = death;
}

/* ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
async function loadMembers(){
  try{
    const res=await fetch(API_URL);
    const result=await res.json();
    allMembers=Array.isArray(result)?result:(result.data||[]);
    renderTable();
    updateSummary();
  }catch(err){alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: "+err);}
}

/* ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
function renderTable(){
  tableBody.innerHTML='';
  allMembers.forEach(m=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${m.member_id||''}</td>
<td>${m.first_name||''}</td>
<td>${m.last_name||''}</td>
<td>${m.group||''}</td>
<td>${m.province||''}</td>
<td>${m.member_status||''}</td>
<td><button class="edit" onclick="editMember('${m.member_id}')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></td>
<td><button class="delete" onclick="deleteMember('${m.member_id}')">‡∏•‡∏ö</button></td>`;
    tableBody.appendChild(tr);
  });
}

/* ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
form.addEventListener('submit',async(e)=>{
  e.preventDefault();
  const data=Object.fromEntries(new FormData(form));
  try{
    await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    form.reset();
    loadMembers();
  }catch(err){alert("‚ùå ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: "+err);}
});

/* ‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏´‡∏•‡∏î */
loadMembers();
</script>

</body>
</html>
